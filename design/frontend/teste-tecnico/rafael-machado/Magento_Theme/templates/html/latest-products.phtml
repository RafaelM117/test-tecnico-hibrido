<?php
$_products = $block->getProductCollection();
?>

<div class="home-product-carousel">
    <h2 class="section-title">Lan√ßamentos</h2>
    <div class="carousel-wrapper slick-carousel">
        <?php foreach ($_products as $_product): ?>
            <div class="product-card">
                <a href="<?= $_product->getProductUrl() ?>">
                    <div class="product-image">
                        <img
                            src="<?= $block->getImage($_product, 'product_base_image')->getImageUrl(); ?>"
                            alt="<?= $block->escapeHtml($_product->getName()) ?>"
                        />
                    </div>
                </a>
                <h3 class="product-title"><?= $block->escapeHtml($_product->getName()) ?></h3>
                <div class="price-box">
                    <?= $block->getProductPriceHtml($_product, 'final_price') ?>
                </div>
            </div>
        <?php endforeach; ?>
    </div>
</div>

<script>
    require(['jquery', 'slick'], function ($) {
        $(document).ready(function () {
            $('.slick-carousel').slick({
                slidesToShow: 4,
                slidesToScroll: 1,
                arrows: true,
                autoplay: true,
                autoplaySpeed: 5000,
                dots: false,
                responsive: [
                    {
                        breakpoint: 1024,
                        settings: { slidesToShow: 3 }
                    },
                    {
                        breakpoint: 768,
                        settings: { slidesToShow: 2 }
                    },
                    {
                        breakpoint: 480,
                        settings: { slidesToShow: 1 }
                    }
                ]
            });
        });
    });
</script>
